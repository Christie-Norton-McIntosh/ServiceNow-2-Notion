# Diff Output Flow Diagram

## Complete Integration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER EXTRACTS PAGE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ servicenow.cjs          â”‚
                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                    â”‚ Extract HTML blocks     â”‚
                    â”‚ Create Notion blocks    â”‚
                    â”‚ Run AUDIT validation    â”‚
                    â”‚ Generate diff (NEW)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Validation Result                    â”‚
              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
              â”‚ âœ… PASS (98%)                       â”‚
              â”‚   â†’ No diff needed                   â”‚
              â”‚                                      â”‚
              â”‚ âŒ FAIL (87%)                       â”‚
              â”‚   â†’ Generate diff âœ“                 â”‚
              â”‚   â†’ Store in auditResult.diff âœ“    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Extract Result Object                â”‚
              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
              â”‚ {                                    â”‚
              â”‚   audit: {                           â”‚
              â”‚     passed: false,                   â”‚
              â”‚     coverage: "87.2%",               â”‚
              â”‚     diff: {                    â† NEW â”‚
              â”‚       missingBlocks: 4,        â† NEW â”‚
              â”‚       extraBlocks: 1,          â† NEW â”‚
              â”‚       missingSamples: [...],   â† NEW â”‚
              â”‚       extraSamples: [...]      â† NEW â”‚
              â”‚     }                          â† NEW â”‚
              â”‚   }                                  â”‚
              â”‚ }                                    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ w2n.cjs                 â”‚
                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                    â”‚ Read auditResult        â”‚
                    â”‚ Format Audit property   â”‚
                    â”‚ Add diff to property    â”‚ â† NEW
                    â”‚ Update Notion page      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Audit Property (in Notion)                           â”‚
              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
              â”‚ [2025-12-09] Content Audit: âŒ FAIL                 â”‚
              â”‚ Coverage: 87.2% (threshold: 95-105%)                â”‚
              â”‚ Source: 52 text nodes, 3,421 chars                  â”‚
              â”‚ Notion: 48 blocks, 2,984 chars                      â”‚
              â”‚ Block/Node Ratio: 0.92x                             â”‚
              â”‚ Content: 3 tables, 2 callouts                       â”‚
              â”‚ âš ï¸ Missing: 437 chars (12.8%)                      â”‚
              â”‚                                                      â”‚
              â”‚ HTML segments: 52, Notion segments: 48              â”‚
              â”‚                                                      â”‚
              â”‚ ğŸ” Enhanced Diff Analysis:          â† NEW SECTION  â”‚
              â”‚ âŒ Missing blocks: 4                â† NEW           â”‚
              â”‚    1. "Configure service now..."    â† NEW           â”‚
              â”‚    2. "After configuration, test..." â† NEW          â”‚
              â”‚    3. "For advanced users, see..."  â† NEW           â”‚
              â”‚    ... and 1 more                   â† NEW           â”‚
              â”‚ â• Extra blocks: 1                  â† NEW           â”‚
              â”‚    1. "Duplicate section..."        â† NEW           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ NOTION PAGE              â”‚
                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
                    â”‚ Developer sees:         â”‚
                    â”‚ â€¢ Exact missing blocks  â”‚
                    â”‚ â€¢ Sample text           â”‚
                    â”‚ â€¢ Can find in page      â”‚
                    â”‚ â€¢ Knows how to fix      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Before vs After

### BEFORE (v11.0.199)

```
Developer extracts page
         â†“
     âŒ FAIL
         â†“
Audit property shows:
  [2025-12-09] Content Audit: âŒ FAIL
  Coverage: 87.2%
  âš ï¸ Missing: 437 chars (12.8%)
  
         âŒ "Which blocks are missing? ğŸ¤”"
         
         â†“
Developer opens console
         â†“
Grep logs for [DIFF]
         â†“
Read verbose output
         â†“
Manually find blocks
         â†“
"Finally know what to fix"
         â†“
TIME: ~5 minutes
```

### AFTER (v11.0.200)

```
Developer extracts page
         â†“
     âŒ FAIL
         â†“
Audit property shows:
  [2025-12-09] Content Audit: âŒ FAIL
  Coverage: 87.2%
  
  ğŸ” Enhanced Diff Analysis:
  âŒ Missing blocks: 4
     1. "Configure service now..."
     2. "After configuration..."
     3. "For advanced users..."
     ... and 1 more
     
         âœ… "Exactly which blocks are missing!"
         â†“
         "Found them in Notion"
         â†“
         "Know exactly how to fix"
         â†“
TIME: ~30 seconds
```

---

## Data Structure Evolution

### servicenow.cjs (Diff Generation)

```javascript
// Generate diff when validation fails
if (enableAudit && sourceAudit && sourceAudit.result && !sourceAudit.result.passed) {
  // Extract HTML blocks
  const htmlBlocks = [...];
  
  // Extract Notion blocks
  const notionBlocks = [...];
  
  // Compare with diff library
  const changes = diff.diffLines(htmlText, notionText);
  
  // Store results
  sourceAudit.result.diff = {
    missingBlocks: 4,
    extraBlocks: 1,
    missingSamples: ["Configure...", "After...", "For..."],
    extraSamples: ["Duplicate..."]
  };
}
```

### w2n.cjs (Property Integration) â† NEW

```javascript
// NEW: Read diff from audit result
if (auditResult.diff && !auditResult.passed) {
  const diff = auditResult.diff;
  
  // Format for property
  validationLines.push('');
  validationLines.push('ğŸ” Enhanced Diff Analysis:');
  
  if (diff.missingBlocks > 0) {
    validationLines.push(`âŒ Missing blocks: ${diff.missingBlocks}`);
    diff.missingSamples.slice(0, 3).forEach((sample, i) => {
      validationLines.push(`   ${i + 1}. "${preview}"`);
    });
  }
  
  // ... add to propertyUpdates["Audit"]
}
```

### Notion Page (Final Result)

```
Audit property:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [2025-12-09] Content Audit: âŒ FAIL       â”‚
â”‚ Coverage: 87.2%                           â”‚
â”‚ ...metrics...                             â”‚
â”‚                                           â”‚
â”‚ ğŸ” Enhanced Diff Analysis:                â”‚
â”‚ âŒ Missing blocks: 4                      â”‚
â”‚    1. "Configure service now..."          â”‚
â”‚    2. "After configuration, test..."      â”‚
â”‚    3. "For advanced users, see..."        â”‚
â”‚    ... and 1 more                         â”‚
â”‚ â• Extra blocks: 1                        â”‚
â”‚    1. "Duplicate section from earlier"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Relationships

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  servicenow.cjs      â”‚
                    â”‚  (diff generator)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ sourceAudit.result   â”‚
                    â”‚ .diff                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ extractionResult     â”‚
                    â”‚ .audit.diff          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  w2n.cjs             â”‚
                    â”‚  (NEW integration)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ propertyUpdates      â”‚
                    â”‚ ["Audit"]            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Notion Page          â”‚
                    â”‚ (Audit property)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diff Analysis Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ servicenow.cjs: Enhanced Diff Analysis                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ 1. Extract HTML blocks                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚ HTML: p, li, h1-h6, td, th          â”‚               â”‚
â”‚    â”‚ Count: 52 blocks                     â”‚               â”‚
â”‚    â”‚ Normalize: NFC, whitespace           â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚ 2. Extract Notion blocks                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚ All block types (recursive)          â”‚               â”‚
â”‚    â”‚ Count: 48 blocks                     â”‚               â”‚
â”‚    â”‚ Filter: red color (technical terms)  â”‚               â”‚
â”‚    â”‚ Normalize: NFC, whitespace           â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚ 3. Compare with diff library                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚ diff.diffLines(htmlText, notionText) â”‚               â”‚
â”‚    â”‚ Detect: removed + added              â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚ 4. Store results                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚ sourceAudit.result.diff = {          â”‚               â”‚
â”‚    â”‚   missingBlocks: 4,                  â”‚               â”‚
â”‚    â”‚   extraBlocks: 1,                    â”‚               â”‚
â”‚    â”‚   missingSamples: [...],             â”‚               â”‚
â”‚    â”‚   extraSamples: [...]                â”‚               â”‚
â”‚    â”‚ }                                     â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚ 5. Log to console (full detail)                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚ ğŸ” [DIFF] HTML blocks: 52           â”‚               â”‚
â”‚    â”‚ ğŸ” [DIFF] Notion blocks: 48         â”‚               â”‚
â”‚    â”‚ âŒ [DIFF] Missing: 4                â”‚               â”‚
â”‚    â”‚    1. "Configure..."                 â”‚               â”‚
â”‚    â”‚    2. "After..."                     â”‚               â”‚
â”‚    â”‚    ...                               â”‚               â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ w2n.cjs: Property Integration (NEW)                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ 1. Read diff from audit result                             â”‚
â”‚    const diff = auditResult.diff;                          â”‚
â”‚                                                             â”‚
â”‚ 2. Format for Notion property                              â”‚
â”‚    âŒ Missing blocks: 4                                    â”‚
â”‚       1. "Configure..." (truncated)                        â”‚
â”‚       2. "After..." (truncated)                            â”‚
â”‚       3. "For..." (truncated)                              â”‚
â”‚       ... and 1 more                                       â”‚
â”‚                                                             â”‚
â”‚ 3. Add to Audit property                                   â”‚
â”‚    propertyUpdates["Audit"] = {                            â”‚
â”‚      rich_text: [{ type: 'text', text: {...} }]           â”‚
â”‚    }                                                        â”‚
â”‚                                                             â”‚
â”‚ 4. Update Notion page                                      â”‚
â”‚    await notion.pages.update({                             â”‚
â”‚      id: pageId,                                           â”‚
â”‚      properties: propertyUpdates                           â”‚
â”‚    })                                                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notion Page: Audit Property (VISIBLE)                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                             â”‚
â”‚ ğŸ” Enhanced Diff Analysis:                                 â”‚
â”‚ âŒ Missing blocks: 4                                       â”‚
â”‚    1. "Configure service now integration..."              â”‚
â”‚    2. "After configuration, test the connection..."       â”‚
â”‚    3. "For advanced users, see the API reference..."      â”‚
â”‚    ... and 1 more                                          â”‚
â”‚ â• Extra blocks: 1                                         â”‚
â”‚    1. "Duplicate section from earlier attempt"            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

```
The diff output (which blocks are missing/extra) now flows:

servicenow.cjs (generate) 
    â†“
sourceAudit.result.diff (store)
    â†“
w2n.cjs (NEW: format & integrate)
    â†“
Audit property (NEW: visible in Notion)
    â†“
Developer (NEW: sees exactly what's missing!)
```

**Result**: Debugging time reduced from 5+ minutes to 30 seconds! ğŸš€

---

**Version**: v11.0.200  
**Component**: Diff Output Integration  
**Status**: âœ… Complete
